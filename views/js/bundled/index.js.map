{"mappings":"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","sources":["<anon>","views/js/index.js","views/js/mapbox.js","views/js/alerts.js","views/js/updateSettings.js"],"sourcesContent":["// remember to run the following command on cli (script on package.json)\n// npm run watch:js\n/* eslint-disable*/ //import '@babel/polyfill'; =====> test with try catch block!!!!!!!\n/* eslint-disable */ const $cb448af45f225874$export$4c5dd147b21b9176 = (locations)=>{\n    mapboxgl.accessToken = \"pk.eyJ1IjoicmFmYWVsdm9zcyIsImEiOiJjbG4xeWk2MjAwMzZmMm9vNWxjaW13ZjljIn0.LGqj0OzqFN-yU0xqOhZbow\";\n    const map = new mapboxgl.Map({\n        container: \"map\",\n        style: \"mapbox://styles/rafaelvoss/cln223e2x06d201qi2gjp31vv\",\n        scrollZoom: false\n    });\n    const bounds = new mapboxgl.LngLatBounds();\n    locations.forEach((loc)=>{\n        // Create marker\n        const el = document.createElement(\"div\");\n        el.className = \"marker\";\n        // Add marker\n        new mapboxgl.Marker({\n            element: el,\n            anchor: \"bottom\"\n        }).setLngLat(loc.coordinates).addTo(map);\n        // Add popup\n        new mapboxgl.Popup({\n            offset: 30\n        }).setLngLat(loc.coordinates).setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`).addTo(map);\n        // Extend map bounds to include current location\n        bounds.extend(loc.coordinates);\n    });\n    map.fitBounds(bounds, {\n        padding: {\n            top: 200,\n            bottom: 150,\n            left: 100,\n            right: 100\n        }\n    });\n}; //module.exports.displayMap = displayMap;\n\n\nconst $2819bc8172772e42$var$hideAlert = ()=>{\n    const el = document.querySelector(\".alert\");\n    if (el) el.parentElement.removeChild(el);\n};\nconst $2819bc8172772e42$export$de026b00723010c1 = (type, msg, time = 7)=>{\n    $2819bc8172772e42$var$hideAlert();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\n    window.setTimeout($2819bc8172772e42$var$hideAlert, time * 1000);\n}; //module.exports.showAlert = showAlert;\n\n\n/* eslint-disable*/ \nconst $8e70a93481f0d51c$var$userDataForm = document.querySelector(\".form-user-data\");\nconst $8e70a93481f0d51c$var$userPasswordForm = document.querySelector(\".form-user-password\");\nif ($8e70a93481f0d51c$var$userDataForm || $8e70a93481f0d51c$var$userPasswordForm) {\n    // type is either 'Password' or 'Data'\n    const updateSettings = async (data, type)=>{\n        try {\n            const url = type === \"Password\" ? \"/api/v1/users/updateMyPassword\" : \"/api/v1/users/updateMe\";\n            const res = await axios({\n                method: \"PATCH\",\n                url: url,\n                data: data\n            });\n            if (res.data.status === \"success\") {\n                (0, $2819bc8172772e42$export$de026b00723010c1)(\"success\", `${type} updated successfully!`);\n                window.setTimeout(()=>{\n                    location.assign(\"/me\");\n                }, 1500);\n            }\n        } catch (err) {\n            (0, $2819bc8172772e42$export$de026b00723010c1)(\"error\", err.response.data.message);\n        }\n    };\n    $8e70a93481f0d51c$var$userDataForm.addEventListener(\"submit\", async (e)=>{\n        e.preventDefault();\n        const form = new FormData();\n        form.append(\"name\", document.getElementById(\"name\").value);\n        form.append(\"email\", document.getElementById(\"email\").value);\n        form.append(\"photo\", document.getElementById(\"photo\").files[0]);\n        await updateSettings(form, \"Data\");\n    });\n    $8e70a93481f0d51c$var$userPasswordForm.addEventListener(\"submit\", async (e)=>{\n        e.preventDefault();\n        document.querySelector(\".btn--save-password\").textContent = \"Updating...\";\n        const passwordCurrent = document.getElementById(\"password-current\").value;\n        const password = document.getElementById(\"password\").value;\n        const passwordConfirm = document.getElementById(\"password-confirm\").value;\n        await updateSettings({\n            passwordCurrent: passwordCurrent,\n            password: password,\n            passwordConfirm: passwordConfirm\n        }, \"Password\");\n        document.querySelector(\".btn--save-password\").textContent = \"SAVE PASSWORD\";\n        document.getElementById(\"password\").value = \"\";\n        document.getElementById(\"password-confirm\").value = \"\";\n    });\n}\n ///////////////////////////////////////////////////////////////////////\n // if (userPasswordForm) {\n //   const updatePassword = async (passwordCurrent, password, passwordConfirm) => {\n //     try{\n //       const res = await axios({\n //         method: 'PATCH',\n //         url: 'http://127.0.0.1:3000/api/v1/users/updateMyPassword',\n //         data: {\n //             passwordCurrent,\n //             password,\n //             passwordConfirm\n //         }\n //       });\n //       if (res.data.status === 'success') {\n //         showAlert('success','Password updated successfully!');\n //         window.setTimeout(()=> {\n //           location.assign('/me');\n //         }, 1500);\n //       }\n //     } catch (err) {\n //       showAlert('error', err.response.data.message);\n //     };\n //   };\n // };\n // export const updateData = async (name, email) => {\n //     try {\n //         const res = await axios({\n //             method: 'PATCH',\n //             url: 'http://127.0.0.1:3000/api/v1/users/updateMe',\n //             data: {\n //                 name,\n //                 email\n //             }\n //         })\n //         if (res.data.status === 'success') {\n //             showAlert('success', 'Data updated successfully!')\n //         }\n //     } catch (err) {\n //         showAlert('error', err.response.data.message);\n //     };\n // }\n\n\n// DOM ELEMENTS\nconst $18d23831ec160c29$var$mapBox = document.getElementById(\"map\");\n// DELEGATION\nif ($18d23831ec160c29$var$mapBox) {\n    const locations = JSON.parse($18d23831ec160c29$var$mapBox.dataset.locations);\n    (0, $cb448af45f225874$export$4c5dd147b21b9176)(locations);\n}\nconst $18d23831ec160c29$var$alertMessage = document.querySelector(\"body\").dataset.alert;\nif (alert) showAllert(\"success\", $18d23831ec160c29$var$alertMessage, 20);\n\n\n//# sourceMappingURL=index.js.map\n","// remember to run the following command on cli (script on package.json)\r\n// npm run watch:js\r\n\r\n/* eslint-disable*/\r\n\r\n//import '@babel/polyfill'; =====> test with try catch block!!!!!!!\r\nimport { displayMap } from './mapbox.js';\r\nimport { showAlert } from './alerts.js';\r\nimport { updateData } from './updateSettings.js';\r\n\r\n// DOM ELEMENTS\r\nconst mapBox = document.getElementById('map');\r\n\r\n// DELEGATION\r\nif (mapBox) {\r\n    const locations = JSON.parse(mapBox.dataset.locations);\r\n    displayMap(locations);\r\n}\r\n\r\nconst alertMessage = document.querySelector('body').dataset.alert;\r\nif (alert) showAllert('success', alertMessage, 20);","/* eslint-disable */\r\n\r\nexport const displayMap = (locations) => {\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1IjoicmFmYWVsdm9zcyIsImEiOiJjbG4xeWk2MjAwMzZmMm9vNWxjaW13ZjljIn0.LGqj0OzqFN-yU0xqOhZbow';\r\n  const map = new mapboxgl.Map({\r\n    container: 'map',\r\n    style: 'mapbox://styles/rafaelvoss/cln223e2x06d201qi2gjp31vv',\r\n    scrollZoom: false,\r\n    //   center: [-118.113491, 34.111745],\r\n    //   zoom: 5,\r\n    //   interactive: false\r\n  });\r\n\r\n  const bounds = new mapboxgl.LngLatBounds();\r\n\r\n  locations.forEach((loc) => {\r\n    // Create marker\r\n    const el = document.createElement('div');\r\n    el.className = 'marker';\r\n\r\n    // Add marker\r\n    new mapboxgl.Marker({\r\n      element: el,\r\n      anchor: 'bottom',\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .addTo(map);\r\n\r\n    // Add popup\r\n    new mapboxgl.Popup({\r\n      offset: 30,\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\r\n      .addTo(map);\r\n\r\n    // Extend map bounds to include current location\r\n    bounds.extend(loc.coordinates);\r\n  });\r\n\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 150,\r\n      left: 100,\r\n      right: 100,\r\n    },\r\n  });\r\n};\r\n\r\n//module.exports.displayMap = displayMap;","const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\n// type is 'success' or 'error'\r\nexport const showAlert = (type, msg, time = 7) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, time * 1000);\r\n};\r\n\r\n//module.exports.showAlert = showAlert;\r\n","/* eslint-disable*/\r\nimport { showAlert } from './alerts.js';\r\n\r\nconst userDataForm = document.querySelector('.form-user-data')\r\nconst userPasswordForm = document.querySelector('.form-user-password')\r\n\r\nif (userDataForm || userPasswordForm) {\r\n  // type is either 'Password' or 'Data'\r\n  const updateSettings = async (data, type) => {\r\n    try{\r\n      const url = type === 'Password' ? '/api/v1/users/updateMyPassword' : '/api/v1/users/updateMe'\r\n      const res = await axios({\r\n        method: 'PATCH',\r\n        url,\r\n        data\r\n      });\r\n      \r\n      if (res.data.status === 'success') {\r\n        showAlert('success',`${type} updated successfully!`);\r\n        window.setTimeout(()=> {\r\n          location.assign('/me');\r\n        }, 1500);\r\n      }\r\n  \r\n    } catch (err) {\r\n      showAlert('error', err.response.data.message);\r\n    };\r\n  };\r\n  \r\n  userDataForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n    await updateSettings(form, 'Data');\r\n  });\r\n\r\n  userPasswordForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    document.querySelector('.btn--save-password').textContent = 'Updating...'\r\n    const passwordCurrent = document.getElementById('password-current').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n    await updateSettings({passwordCurrent, password, passwordConfirm}, 'Password');\r\n\r\n    document.querySelector('.btn--save-password').textContent = 'SAVE PASSWORD';\r\n    document.getElementById('password').value = '';\r\n    document.getElementById('password-confirm').value = '';\r\n  });\r\n};\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////\r\n\r\n\r\n// if (userPasswordForm) {\r\n//   const updatePassword = async (passwordCurrent, password, passwordConfirm) => {\r\n//     try{\r\n//       const res = await axios({\r\n//         method: 'PATCH',\r\n//         url: 'http://127.0.0.1:3000/api/v1/users/updateMyPassword',\r\n//         data: {\r\n//             passwordCurrent,\r\n//             password,\r\n//             passwordConfirm\r\n//         }\r\n//       });\r\n      \r\n//       if (res.data.status === 'success') {\r\n//         showAlert('success','Password updated successfully!');\r\n//         window.setTimeout(()=> {\r\n//           location.assign('/me');\r\n//         }, 1500);\r\n//       }\r\n  \r\n//     } catch (err) {\r\n//       showAlert('error', err.response.data.message);\r\n//     };\r\n//   };\r\n  \r\n  \r\n// };\r\n\r\n// export const updateData = async (name, email) => {\r\n//     try {\r\n//         const res = await axios({\r\n//             method: 'PATCH',\r\n//             url: 'http://127.0.0.1:3000/api/v1/users/updateMe',\r\n//             data: {\r\n//                 name,\r\n//                 email\r\n//             }\r\n//         })\r\n        \r\n//         if (res.data.status === 'success') {\r\n//             showAlert('success', 'Data updated successfully!')\r\n//         }\r\n//     } catch (err) {\r\n//         showAlert('error', err.response.data.message);\r\n//     };\r\n// }"],"names":["$2819bc8172772e42$var$hideAlert","el","document","querySelector","parentElement","removeChild","$2819bc8172772e42$export$de026b00723010c1","type","msg","time","markup","insertAdjacentHTML","window","setTimeout","$8e70a93481f0d51c$var$userDataForm","$8e70a93481f0d51c$var$userPasswordForm","updateSettings","data","url","res","axios","method","status","location","assign","err","response","message","addEventListener","e","preventDefault","form","FormData","append","getElementById","value","files","textContent","passwordCurrent","password","passwordConfirm","$18d23831ec160c29$var$mapBox","locations","JSON","parse","dataset","mapboxgl","accessToken","map","Map","container","style","scrollZoom","bounds","LngLatBounds","forEach","loc","createElement","className","Marker","element","anchor","setLngLat","coordinates","addTo","Popup","offset","setHTML","day","description","extend","fitBounds","padding","top","bottom","left","right","$18d23831ec160c29$var$alertMessage","alert","showAllert"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}